table$position_all <- positions$crown.position[match(table$tag, positions$tag)]
table$position_all <- gsub("D", "dominant", table$position_all)
table$position_all <- gsub("C", "co-dominant", table$position_all)
table$position_all <- gsub("I", "intermediate", table$position_all)
table$position_all <- gsub("S", "suppressed", table$position_all)
table1 <- table %>%
group_by(sp) %>%
summarize(n_cores=n())
table2 <- table %>%
group_by(sp, position_all) %>%
summarize(count=n())
table2 <- spread(table2, key=position_all, value=count)
setnames(table2, old="<NA>", new="prior dead")
table2$n_cores <- table1$n_cores[match(table2$sp, table1$sp)]
table2 <- table2[, c(1,7,3,2,4:6)]
table2 <- table2[!table2$sp %in% c("frni", "pist"), ]
table1 <- table1[!table1$sp %in% c("frni", "pist"), ]
#bring in trait values
trees_all <- read.csv("manuscript/tables_figures/trees_all.csv", stringsAsFactors = FALSE)
traits <- trees_all[,c(4:9)]
traits <- traits[!duplicated(traits$sp), ]
table2 <- merge(table2, traits, by="sp")
#bring in mean DBH and DBH range for each species
dbh_cored <- species[,c(1:9)]
dbh_cored <- dbh_cored %>%
group_by(sp) %>%
summarise(mean = mean(dbh2018),
min = min(dbh2018),
max = max(dbh2018))
dbh_cored$mean <- round(dbh_cored$mean, 2)
dbh_cored$range <- paste0(dbh_cored$min, " - ", dbh_cored$max)
dbh_cored[,c("min", "max")] <- NULL
dbh_cored <- dbh_cored[dbh_cored$sp != c("frni", "pist"), ]
table2 <- merge(dbh_cored, table2, by = "sp")
table2_SI <- table2[,c(5:9)]
table2 <- table2[,-c(5:9)]
table2[,c(6:9)] <- round(table2[,c(6:9)], 2)
setnames(table2, old=c("mean", "range", "n_cores", "rp", "PLA_dry_percent", "LMA_g_per_m2", "mean_TLP_Mpa", "WD_g_per_cm3"), new=c("mean $DBH$", "range $DBH$", "n.cores", "$RP$", "$PLA$", "$LMA$", "$\\pi_{tlp}$", "$WD$"))
#i think this originally came from one of valentine's tables
table2$percent.ANPP <- c(2, 3.7, 1.1,
2, 1.5, 3.8,
2.1, 47.1, 10.7,
4.8, 10.1, 7.8)
table2$sp <- c("Carya cordiformis (CACO)", "Carya glabra (CAGL)", "Carya ovalis (CAOVL)",
"Carya tomentosa (CATO)", "Fagus grandifolia (FAGR)", "Fraxinus americana (FRAM)	",
"Juglans nigra (JUNI)", "Liriodendron tulipifera (LITU)", "Quercus alba (QUAL)",
"Quercus montana (QUPR)", "Quercus rubra (QURU)", "Quercus velutina (QUVE)")
View(table2)
table2 <- table2[,c(1,10,4,2:3,5:9)]
View(table2)
sort(table2$percent.ANPP, decreasing=TRUE)
table2 <- table2[sort(table2$percent.ANPP, decreasing=TRUE), ]
View(table2)
library(RCurl)
library(tidyr)
library(data.table)
library(dplyr)
species <- read.csv("data/core_list_for_neil.csv", stringsAsFactors = FALSE)
table <- species[, c(1:3,6,17)]
positions <- read.csv(text=getURL("https://raw.githubusercontent.com/SCBI-ForestGEO/SCBI-ForestGEO-Data/master/tree_dimensions/tree_crowns/cored_dendroband_crown_position_data/dendro_cored_full.csv"))
table$position_all <- positions$crown.position[match(table$tag, positions$tag)]
table$position_all <- gsub("D", "dominant", table$position_all)
table$position_all <- gsub("C", "co-dominant", table$position_all)
table$position_all <- gsub("I", "intermediate", table$position_all)
table$position_all <- gsub("S", "suppressed", table$position_all)
table1 <- table %>%
group_by(sp) %>%
summarize(n_cores=n())
table2 <- table %>%
group_by(sp, position_all) %>%
summarize(count=n())
table2 <- spread(table2, key=position_all, value=count)
setnames(table2, old="<NA>", new="prior dead")
table2$n_cores <- table1$n_cores[match(table2$sp, table1$sp)]
table2 <- table2[, c(1,7,3,2,4:6)]
table2 <- table2[!table2$sp %in% c("frni", "pist"), ]
table1 <- table1[!table1$sp %in% c("frni", "pist"), ]
#bring in trait values
trees_all <- read.csv("manuscript/tables_figures/trees_all.csv", stringsAsFactors = FALSE)
traits <- trees_all[,c(4:9)]
traits <- traits[!duplicated(traits$sp), ]
table2 <- merge(table2, traits, by="sp")
#bring in mean DBH and DBH range for each species
dbh_cored <- species[,c(1:9)]
dbh_cored <- dbh_cored %>%
group_by(sp) %>%
summarise(mean = mean(dbh2018),
min = min(dbh2018),
max = max(dbh2018))
dbh_cored$mean <- round(dbh_cored$mean, 2)
dbh_cored$range <- paste0(dbh_cored$min, " - ", dbh_cored$max)
dbh_cored[,c("min", "max")] <- NULL
dbh_cored <- dbh_cored[dbh_cored$sp != c("frni", "pist"), ]
table2 <- merge(dbh_cored, table2, by = "sp")
table2_SI <- table2[,c(5:9)]
table2 <- table2[,-c(5:9)]
table2[,c(6:9)] <- round(table2[,c(6:9)], 2)
setnames(table2, old=c("mean", "range", "n_cores", "rp", "PLA_dry_percent", "LMA_g_per_m2", "mean_TLP_Mpa", "WD_g_per_cm3"), new=c("mean $DBH$", "range $DBH$", "n.cores", "$RP$", "$PLA$", "$LMA$", "$\\pi_{tlp}$", "$WD$"))
#i think this originally came from one of valentine's tables
table2$percent.ANPP <- c(2, 3.7, 1.1,
2, 1.5, 3.8,
2.1, 47.1, 10.7,
4.8, 10.1, 7.8)
table2$sp <- c("Carya cordiformis (CACO)", "Carya glabra (CAGL)", "Carya ovalis (CAOVL)",
"Carya tomentosa (CATO)", "Fagus grandifolia (FAGR)", "Fraxinus americana (FRAM)	",
"Juglans nigra (JUNI)", "Liriodendron tulipifera (LITU)", "Quercus alba (QUAL)",
"Quercus montana (QUPR)", "Quercus rubra (QURU)", "Quercus velutina (QUVE)")
table2 <- table2[,c(1,10,4,2:3,5:9)]
table2 <- table2[base::order(table2$percent.ANPP, decreasing=TRUE), ]
View(table2)
table2[8,6] <- "semi-ring*"
library(RCurl)
library(tidyr)
library(data.table)
library(dplyr)
species <- read.csv("data/core_list_for_neil.csv", stringsAsFactors = FALSE)
table <- species[, c(1:3,6,17)]
positions <- read.csv(text=getURL("https://raw.githubusercontent.com/SCBI-ForestGEO/SCBI-ForestGEO-Data/master/tree_dimensions/tree_crowns/cored_dendroband_crown_position_data/dendro_cored_full.csv"))
table$position_all <- positions$crown.position[match(table$tag, positions$tag)]
table$position_all <- gsub("D", "dominant", table$position_all)
table$position_all <- gsub("C", "co-dominant", table$position_all)
table$position_all <- gsub("I", "intermediate", table$position_all)
table$position_all <- gsub("S", "suppressed", table$position_all)
table1 <- table %>%
group_by(sp) %>%
summarize(n_cores=n())
table2 <- table %>%
group_by(sp, position_all) %>%
summarize(count=n())
table2 <- spread(table2, key=position_all, value=count)
setnames(table2, old="<NA>", new="prior dead")
table2$n_cores <- table1$n_cores[match(table2$sp, table1$sp)]
table2 <- table2[, c(1,7,3,2,4:6)]
table2 <- table2[!table2$sp %in% c("frni", "pist"), ]
table1 <- table1[!table1$sp %in% c("frni", "pist"), ]
#bring in trait values
trees_all <- read.csv("manuscript/tables_figures/trees_all.csv", stringsAsFactors = FALSE)
traits <- trees_all[,c(4:9)]
traits <- traits[!duplicated(traits$sp), ]
table2 <- merge(table2, traits, by="sp")
#bring in mean DBH and DBH range for each species
dbh_cored <- species[,c(1:9)]
dbh_cored <- dbh_cored %>%
group_by(sp) %>%
summarise(mean = mean(dbh2018),
min = min(dbh2018),
max = max(dbh2018))
dbh_cored$mean <- round(dbh_cored$mean, 2)
dbh_cored$range <- paste0(dbh_cored$min, " - ", dbh_cored$max)
dbh_cored[,c("min", "max")] <- NULL
dbh_cored <- dbh_cored[dbh_cored$sp != c("frni", "pist"), ]
table2 <- merge(dbh_cored, table2, by = "sp")
table2_SI <- table2[,c(5:9)]
table2 <- table2[,-c(5:9)]
table2[,c(6:9)] <- round(table2[,c(6:9)], 2)
setnames(table2,
old=c("mean", "range", "n_cores", "rp", "PLA_dry_percent", "LMA_g_per_m2", "mean_TLP_Mpa", "WD_g_per_cm3"),
new=c("mean $DBH$ (cm)", "range $DBH$ (cm)", "n.cores", "$RP$", "$PLA$ (\\%)", "$LMA$ ($\\frac{g}{cm^2}$)", "$\\pi_{tlp}$ (Mpa)", "$WD$ ($\\frac{g}{cm^3}$)"))
#i think this originally came from one of valentine's tables
table2$percent.ANPP <- c(2, 3.7, 1.1,
2, 1.5, 3.8,
2.1, 47.1, 10.7,
4.8, 10.1, 7.8)
table2$sp <- c("Carya cordiformis (CACO)", "Carya glabra (CAGL)", "Carya ovalis (CAOVL)",
"Carya tomentosa (CATO)", "Fagus grandifolia (FAGR)", "Fraxinus americana (FRAM)	",
"Juglans nigra (JUNI)", "Liriodendron tulipifera (LITU)", "Quercus alba (QUAL)",
"Quercus montana (QUPR)", "Quercus rubra (QURU)", "Quercus velutina (QUVE)")
table2 <- table2[,c(1,10,4,2:3,5:9)]
table2 <- table2[base::order(table2$percent.ANPP, decreasing=TRUE), ]
table2[8,6] <- "semi-ring*" #change juni ring porosity
View(table2)
write.csv(table2, "manuscript/tables_figures/table3_species_table.csv", row.names=FALSE)
library(RCurl)
library(tidyr)
library(data.table)
library(dplyr)
species <- read.csv("data/core_list_for_neil.csv", stringsAsFactors = FALSE)
table <- species[, c(1:3,6,17)]
positions <- read.csv(text=getURL("https://raw.githubusercontent.com/SCBI-ForestGEO/SCBI-ForestGEO-Data/master/tree_dimensions/tree_crowns/cored_dendroband_crown_position_data/dendro_cored_full.csv"))
table$position_all <- positions$crown.position[match(table$tag, positions$tag)]
table$position_all <- gsub("D", "dominant", table$position_all)
table$position_all <- gsub("C", "co-dominant", table$position_all)
table$position_all <- gsub("I", "intermediate", table$position_all)
table$position_all <- gsub("S", "suppressed", table$position_all)
table1 <- table %>%
group_by(sp) %>%
summarize(n_cores=n())
table2 <- table %>%
group_by(sp, position_all) %>%
summarize(count=n())
table2 <- spread(table2, key=position_all, value=count)
setnames(table2, old="<NA>", new="prior dead")
table2$n_cores <- table1$n_cores[match(table2$sp, table1$sp)]
table2 <- table2[, c(1,7,3,2,4:6)]
table2 <- table2[!table2$sp %in% c("frni", "pist"), ]
table1 <- table1[!table1$sp %in% c("frni", "pist"), ]
#bring in trait values
trees_all <- read.csv("manuscript/tables_figures/trees_all.csv", stringsAsFactors = FALSE)
traits <- trees_all[,c(4:9)]
traits <- traits[!duplicated(traits$sp), ]
table2 <- merge(table2, traits, by="sp")
#bring in mean DBH and DBH range for each species
dbh_cored <- species[,c(1:9)]
dbh_cored <- dbh_cored %>%
group_by(sp) %>%
summarise(mean = mean(dbh2018),
min = min(dbh2018),
max = max(dbh2018))
dbh_cored$mean <- round(dbh_cored$mean, 2)
dbh_cored$range <- paste0(dbh_cored$min, " - ", dbh_cored$max)
dbh_cored[,c("min", "max")] <- NULL
dbh_cored <- dbh_cored[dbh_cored$sp != c("frni", "pist"), ]
table2 <- merge(dbh_cored, table2, by = "sp")
table2_SI <- table2[,c(5:9)]
table2 <- table2[,-c(5:9)]
table2[,c(6:9)] <- round(table2[,c(6:9)], 2)
setnames(table2,
old=c("mean", "range", "n_cores", "rp", "PLA_dry_percent", "LMA_g_per_m2", "mean_TLP_Mpa", "WD_g_per_cm3"),
new=c("mean $DBH$ (cm)", "range $DBH$ (cm)", "n.cores", "$RP$", "$PLA$ (\\%)", "$LMA$ ($\\frac{g}{cm^2}$)", "$\\pi_{tlp}$ (Mpa)", "$WD$ ($\\frac{g}{cm^3}$)"))
#i think this originally came from one of valentine's tables
table2$percent.ANPP <- c(2, 3.7, 1.1,
2, 1.5, 3.8,
2.1, 47.1, 10.7,
4.8, 10.1, 7.8)
table2$sp <- c("Carya cordiformis (CACO)", "Carya glabra (CAGL)", "Carya ovalis (CAOVL)",
"Carya tomentosa (CATO)", "Fagus grandifolia (FAGR)", "Fraxinus americana (FRAM)	",
"Juglans nigra (JUNI)", "Liriodendron tulipifera (LITU)", "Quercus alba (QUAL)",
"Quercus montana (QUPR)", "Quercus rubra (QURU)", "Quercus velutina (QUVE)")
table2 <- table2[,c(1,10,4,2:3,5:9)]
table2 <- table2[base::order(table2$percent.ANPP, decreasing=TRUE), ]
table2[8,6] <- "semi-ring*" #change juni ring porosity
org_traits <- fread("https://raw.githubusercontent.com/EcoClimLab/HydraulicTraits/master/data/SCBI/processed_trait_data/SCBI_all_traits_table_species_level.csv?token=AJNRBEKK2MN6MSMV5QFIKS26MQDCM", stringsAsFactors = FALSE)
View(org_traits)
library(RCurl)
library(tidyr)
library(data.table)
library(dplyr)
species <- read.csv("data/core_list_for_neil.csv", stringsAsFactors = FALSE)
table <- species[, c(1:3,6,17)]
positions <- read.csv(text=getURL("https://raw.githubusercontent.com/SCBI-ForestGEO/SCBI-ForestGEO-Data/master/tree_dimensions/tree_crowns/cored_dendroband_crown_position_data/dendro_cored_full.csv"))
table$position_all <- positions$crown.position[match(table$tag, positions$tag)]
table$position_all <- gsub("D", "dominant", table$position_all)
table$position_all <- gsub("C", "co-dominant", table$position_all)
table$position_all <- gsub("I", "intermediate", table$position_all)
table$position_all <- gsub("S", "suppressed", table$position_all)
table1 <- table %>%
group_by(sp) %>%
summarize(n_cores=n())
table2 <- table %>%
group_by(sp, position_all) %>%
summarize(count=n())
table2 <- spread(table2, key=position_all, value=count)
setnames(table2, old="<NA>", new="prior dead")
table2$n_cores <- table1$n_cores[match(table2$sp, table1$sp)]
table2 <- table2[, c(1,7,3,2,4:6)]
table2 <- table2[!table2$sp %in% c("frni", "pist"), ]
table1 <- table1[!table1$sp %in% c("frni", "pist"), ]
#bring in trait values
trees_all <- read.csv("manuscript/tables_figures/trees_all.csv", stringsAsFactors = FALSE)
traits <- trees_all[,c(4:9)]
traits <- traits[!duplicated(traits$sp), ]
table2 <- merge(table2, traits, by="sp")
#bring in mean DBH and DBH range for each species
dbh_cored <- species[,c(1:9)]
dbh_cored <- dbh_cored %>%
group_by(sp) %>%
summarise(mean = mean(dbh2018),
min = min(dbh2018),
max = max(dbh2018))
dbh_cored$mean <- round(dbh_cored$mean, 2)
dbh_cored$range <- paste0(dbh_cored$min, " - ", dbh_cored$max)
dbh_cored[,c("min", "max")] <- NULL
dbh_cored <- dbh_cored[dbh_cored$sp != c("frni", "pist"), ]
table2 <- merge(dbh_cored, table2, by = "sp")
table2_SI <- table2[,c(5:9)]
table2 <- table2[,-c(5:9)]
table2[,c(6:9)] <- round(table2[,c(6:9)], 2)
setnames(table2,
old=c("mean", "range", "n_cores", "rp", "PLA_dry_percent", "LMA_g_per_m2", "mean_TLP_Mpa", "WD_g_per_cm3"),
new=c("mean $DBH$ (cm)", "range $DBH$ (cm)", "n.cores", "$RP$", "$PLA$ (\\%)", "$LMA$ ($\\frac{g}{cm^2}$)", "$\\pi_{tlp}$ (Mpa)", "$WD$ ($\\frac{g}{cm^3}$)"))
#i think this originally came from one of valentine's tables
table2$percent.ANPP <- c(2, 3.7, 1.1,
2, 1.5, 3.8,
2.1, 47.1, 10.7,
4.8, 10.1, 7.8)
table2$sp <- c("Carya cordiformis (CACO)", "Carya glabra (CAGL)", "Carya ovalis (CAOVL)",
"Carya tomentosa (CATO)", "Fagus grandifolia (FAGR)", "Fraxinus americana (FRAM)	",
"Juglans nigra (JUNI)", "Liriodendron tulipifera (LITU)", "Quercus alba (QUAL)",
"Quercus montana (QUPR)", "Quercus rubra (QURU)", "Quercus velutina (QUVE)")
#get standard deviation
org_traits <- fread("https://raw.githubusercontent.com/EcoClimLab/HydraulicTraits/master/data/SCBI/processed_trait_data/SCBI_all_traits_table_species_level.csv?token=AJNRBEKK2MN6MSMV5QFIKS26MQDCM", stringsAsFactors = FALSE)
library(RCurl)
library(tidyr)
library(data.table)
library(dplyr)
species <- read.csv("data/core_list_for_neil.csv", stringsAsFactors = FALSE)
table <- species[, c(1:3,6,17)]
positions <- read.csv(text=getURL("https://raw.githubusercontent.com/SCBI-ForestGEO/SCBI-ForestGEO-Data/master/tree_dimensions/tree_crowns/cored_dendroband_crown_position_data/dendro_cored_full.csv"))
table$position_all <- positions$crown.position[match(table$tag, positions$tag)]
table$position_all <- gsub("D", "dominant", table$position_all)
table$position_all <- gsub("C", "co-dominant", table$position_all)
table$position_all <- gsub("I", "intermediate", table$position_all)
table$position_all <- gsub("S", "suppressed", table$position_all)
table1 <- table %>%
group_by(sp) %>%
summarize(n_cores=n())
table2 <- table %>%
group_by(sp, position_all) %>%
summarize(count=n())
table2 <- spread(table2, key=position_all, value=count)
setnames(table2, old="<NA>", new="prior dead")
table2$n_cores <- table1$n_cores[match(table2$sp, table1$sp)]
table2 <- table2[, c(1,7,3,2,4:6)]
table2 <- table2[!table2$sp %in% c("frni", "pist"), ]
table1 <- table1[!table1$sp %in% c("frni", "pist"), ]
#bring in trait values
trees_all <- read.csv("manuscript/tables_figures/trees_all.csv", stringsAsFactors = FALSE)
traits <- trees_all[,c(4:9)]
traits <- traits[!duplicated(traits$sp), ]
table2 <- merge(table2, traits, by="sp")
#bring in mean DBH and DBH range for each species
dbh_cored <- species[,c(1:9)]
dbh_cored <- dbh_cored %>%
group_by(sp) %>%
summarise(mean = mean(dbh2018),
min = min(dbh2018),
max = max(dbh2018))
dbh_cored$mean <- round(dbh_cored$mean, 2)
dbh_cored$range <- paste0(dbh_cored$min, " - ", dbh_cored$max)
dbh_cored[,c("min", "max")] <- NULL
dbh_cored <- dbh_cored[dbh_cored$sp != c("frni", "pist"), ]
table2 <- merge(dbh_cored, table2, by = "sp")
table2_SI <- table2[,c(5:9)]
table2 <- table2[,-c(5:9)]
table2[,c(6:9)] <- round(table2[,c(6:9)], 2)
setnames(table2,
old=c("mean", "range", "n_cores", "rp", "PLA_dry_percent", "LMA_g_per_m2", "mean_TLP_Mpa", "WD_g_per_cm3"),
new=c("mean $DBH$ (cm)", "range $DBH$ (cm)", "n.cores", "$RP$", "$PLA$ (\\%)", "$LMA$ ($\\frac{g}{cm^2}$)", "$\\pi_{tlp}$ (Mpa)", "$WD$ ($\\frac{g}{cm^3}$)"))
#i think this originally came from one of valentine's tables
table2$percent.ANPP <- c(2, 3.7, 1.1,
2, 1.5, 3.8,
2.1, 47.1, 10.7,
4.8, 10.1, 7.8)
#get standard deviation
org_traits <- fread("https://raw.githubusercontent.com/EcoClimLab/HydraulicTraits/master/data/SCBI/processed_trait_data/SCBI_all_traits_table_species_level.csv?token=AJNRBEKK2MN6MSMV5QFIKS26MQDCM", stringsAsFactors = FALSE)
table2$`$PLA$ (\%)_sd` <- org_traits$PLA_dry_percent_sd[match(table2$sp, org_traits$sp)]
table2$`$LMA$ ($\frac{g}{cm^2}$)_sd` <- org_traits$LMA_g_per_m2_sd[match(table2$sp, org_traits$sp)]
table2$`$\pi_{tlp}$ (Mpa)_sd` <- org_traits$mean_TLP_Mpa_sd[match(table2$sp, org_traits$sp)]
table2$`$WD$ ($\frac{g}{cm^3}$)_sd` <- org_traits$WD_g_per_cm3_sd[match(table2$sp, org_traits$sp)]
table2$`$\\pi_{tlp}$ (Mpa)_sd` <- org_traits$mean_TLP_Mpa_sd[match(table2$sp, org_traits$sp)]
table2$sp <- c("Carya cordiformis (CACO)", "Carya glabra (CAGL)", "Carya ovalis (CAOVL)",
"Carya tomentosa (CATO)", "Fagus grandifolia (FAGR)", "Fraxinus americana (FRAM)	",
"Juglans nigra (JUNI)", "Liriodendron tulipifera (LITU)", "Quercus alba (QUAL)",
"Quercus montana (QUPR)", "Quercus rubra (QURU)", "Quercus velutina (QUVE)")
library(RCurl)
library(tidyr)
library(data.table)
library(dplyr)
species <- read.csv("data/core_list_for_neil.csv", stringsAsFactors = FALSE)
table <- species[, c(1:3,6,17)]
positions <- read.csv(text=getURL("https://raw.githubusercontent.com/SCBI-ForestGEO/SCBI-ForestGEO-Data/master/tree_dimensions/tree_crowns/cored_dendroband_crown_position_data/dendro_cored_full.csv"))
table$position_all <- positions$crown.position[match(table$tag, positions$tag)]
table$position_all <- gsub("D", "dominant", table$position_all)
table$position_all <- gsub("C", "co-dominant", table$position_all)
table$position_all <- gsub("I", "intermediate", table$position_all)
table$position_all <- gsub("S", "suppressed", table$position_all)
table1 <- table %>%
group_by(sp) %>%
summarize(n_cores=n())
table2 <- table %>%
group_by(sp, position_all) %>%
summarize(count=n())
table2 <- spread(table2, key=position_all, value=count)
setnames(table2, old="<NA>", new="prior dead")
table2$n_cores <- table1$n_cores[match(table2$sp, table1$sp)]
table2 <- table2[, c(1,7,3,2,4:6)]
table2 <- table2[!table2$sp %in% c("frni", "pist"), ]
table1 <- table1[!table1$sp %in% c("frni", "pist"), ]
#bring in trait values
trees_all <- read.csv("manuscript/tables_figures/trees_all.csv", stringsAsFactors = FALSE)
traits <- trees_all[,c(4:9)]
traits <- traits[!duplicated(traits$sp), ]
table2 <- merge(table2, traits, by="sp")
#bring in mean DBH and DBH range for each species
dbh_cored <- species[,c(1:9)]
dbh_cored <- dbh_cored %>%
group_by(sp) %>%
summarise(mean = mean(dbh2018),
min = min(dbh2018),
max = max(dbh2018))
dbh_cored$mean <- round(dbh_cored$mean, 2)
dbh_cored$range <- paste0(dbh_cored$min, " - ", dbh_cored$max)
dbh_cored[,c("min", "max")] <- NULL
dbh_cored <- dbh_cored[dbh_cored$sp != c("frni", "pist"), ]
table2 <- merge(dbh_cored, table2, by = "sp")
table2_SI <- table2[,c(5:9)]
table2 <- table2[,-c(5:9)]
table2[,c(6:9)] <- round(table2[,c(6:9)], 2)
setnames(table2,
old=c("mean", "range", "n_cores", "rp", "PLA_dry_percent", "LMA_g_per_m2", "mean_TLP_Mpa", "WD_g_per_cm3"),
new=c("mean $DBH$ (cm)", "range $DBH$ (cm)", "n.cores", "$RP$", "$PLA$ (\\%)", "$LMA$ ($\\frac{g}{cm^2}$)", "$\\pi_{tlp}$ (Mpa)", "$WD$ ($\\frac{g}{cm^3}$)"))
#i think this originally came from one of valentine's tables
table2$percent.ANPP <- c(2, 3.7, 1.1,
2, 1.5, 3.8,
2.1, 47.1, 10.7,
4.8, 10.1, 7.8)
#get standard deviation
org_traits <- fread("https://raw.githubusercontent.com/EcoClimLab/HydraulicTraits/master/data/SCBI/processed_trait_data/SCBI_all_traits_table_species_level.csv?token=AJNRBEKK2MN6MSMV5QFIKS26MQDCM", stringsAsFactors = FALSE)
table2$`$PLA$ (\\%)_sd` <- org_traits$PLA_dry_percent_sd[match(table2$sp, org_traits$sp)]
table2$`$LMA$ ($\frac{g}{cm^2}$)_sd` <- org_traits$LMA_g_per_m2_sd[match(table2$sp, org_traits$sp)]
table2$`$\\pi_{tlp}$ (Mpa)_sd` <- org_traits$mean_TLP_Mpa_sd[match(table2$sp, org_traits$sp)]
table2$`$WD$ ($\frac{g}{cm^3}$)_sd` <- org_traits$WD_g_per_cm3_sd[match(table2$sp, org_traits$sp)]
table2$sp <- c("Carya cordiformis (CACO)", "Carya glabra (CAGL)", "Carya ovalis (CAOVL)",
"Carya tomentosa (CATO)", "Fagus grandifolia (FAGR)", "Fraxinus americana (FRAM)	",
"Juglans nigra (JUNI)", "Liriodendron tulipifera (LITU)", "Quercus alba (QUAL)",
"Quercus montana (QUPR)", "Quercus rubra (QURU)", "Quercus velutina (QUVE)")
table2 <- table2[,c(1,10,4,2:3,5,6,11,7,12,8,13,9,14)]
table2 <- table2[base::order(table2$percent.ANPP, decreasing=TRUE), ]
table2[8,6] <- "semi-ring*" #change juni ring porosity
write.csv(table2, "manuscript/tables_figures/table3_species_table.csv", row.names=FALSE)
regr <- data.frame("Species" = c("Carya cordiformis", "Carya glabra", "Carya ovalis", "Carya tomentosa", "Fagus grandifolia", "Liriodendron tulipifera", "Quercus alba", "Quercus prinus", "Quercus rubra", "all"),
"sp" = c("caco", "cagl", "caovl", "cato", "fagr", "litu", "qual", "qupr", "quru", "all"),
"Equations" = c("ln[H] = 0.332+0.808*ln[DBH]", #caco
"ln[H] = 0.685+0.691*ln[DBH]", #cagl
"ln[H] = 0.533+0.741*ln[DBH]", #caovl
"ln[H] = 0.726+0.713*ln[DBH]", #cato
"ln[H] = 0.708+0.662*ln[DBH]", #fagr
"ln[H] = 1.33+0.52*ln[DBH]", #litu
"ln[H] = 0.74+0.645*ln[DBH]", #qual
"ln[H] = 0.41+0.757*ln[DBH]", #qupr
"ln[H] = 1.00+0.574*ln[DBH]", #quru
"ln[H] = 0.839+0.642*ln[DBH]"), #all
"r^2" = c(0.874, 0.841, 0.924,
0.897, 0.857, 0.771,
0.719,0.886, 0.755,
0.857))
View(regr)
write.csv(regr, "manuscript/tables_figures/tableS2_height_regression.csv", row.names=FALSE)
##2e. add in tree heights ####
## taken from the canopy_heights script
#the full equation is using all points for which we have data to create the equation, despite that for several species we don't have enough data to get a sp-specific equation
height_regr <- read.csv("manuscript/tables_figures/tableS2_height_regression.csv", stringsAsFactors = FALSE)
View(height_regr)
height_regr$Equations <- gsub("ln[H] = ", "", height_regr$Equations)
height_regr$Equations <- gsub("ln[DBH]", "x", height_regr$Equations)
View(height_regr)
View(height_regr)
height_regr$Equations <- gsub("ln[H] = ", "", height_regr$Equations)
View(height_regr)
height_regr[1,3]
gsub("ln[H] = ", "", height_regr[1,3])
gsub("ln[H]", "", height_regr[1,3])
##2e. add in tree heights ####
## taken from the canopy_heights script
#the full equation is using all points for which we have data to create the equation, despite that for several species we don't have enough data to get a sp-specific equation
height_regr <- read.csv("manuscript/tables_figures/tableS2_height_regression.csv", stringsAsFactors = FALSE)
height_regr$Equations <- gsub("ln[H] = ", "", height_regr$Equations)
View(height_regr)
?gsub
height_regr$Equations <- gsub("ln\[H\] = ", "", height_regr$Equations)
grep("ln[H] ", height_regr$Equations)
grep("ln[H]", height_regr$Equations)
height_regr$Equations <- as.character(height_regr$Equations)
height_regr$Equations <- gsub("ln[H] = ", "", height_regr$Equations)
height_regr$Equations <- gsub("ln[DBH]", "x", height_regr$Equations)
View(height_regr)
grepl("ln[H]", height_regr$Equations)
##2e. add in tree heights ####
## taken from the canopy_heights script
#the full equation is using all points for which we have data to create the equation, despite that for several species we don't have enough data to get a sp-specific equation
height_regr <- read.csv("manuscript/tables_figures/tableS2_height_regression.csv", stringsAsFactors = FALSE)
grepl("ln[H]", height_regr$Equations)
class(height_regr$Equations)
as.string(height_regr$Equations)
height_regr$Equations <- as.numeric(height_regr$Equations)
View(height_regr)
##2e. add in tree heights ####
## taken from the canopy_heights script
#the full equation is using all points for which we have data to create the equation, despite that for several species we don't have enough data to get a sp-specific equation
height_regr <- read.csv("manuscript/tables_figures/tableS2_height_regression.csv", stringsAsFactors = FALSE)
grepl("ln[H]", height_regr$Equations)
grepl("In[H]", height_regr$Equations)
grepl("=", height_regr$Equations)
height_regr$Equations <- gsub("^.*= ", "", height_regr$Equations)
View(height_regr)
##2e. add in tree heights ####
## taken from the canopy_heights script
#the full equation is using all points for which we have data to create the equation, despite that for several species we don't have enough data to get a sp-specific equation
height_regr <- read.csv("manuscript/tables_figures/tableS2_height_regression.csv", stringsAsFactors = FALSE)
View(height_regr)
grepl("ln[H]", height_regr$Equations)
height_regr$Equations <- gsub("ln[DBH]", "x", height_regr$Equations)
View(height_regr)
grepl("=", height_regr$Equations)
height_regr$Equations <- gsub("^.*= ", "", height_regr$Equations)
View(height_regr)
height_regr$Equations <- gsub("[[:alpha:]]", "x", height_regr$Equations)
View(height_regr)
##2e. add in tree heights ####
## taken from the canopy_heights script
#the full equation is using all points for which we have data to create the equation, despite that for several species we don't have enough data to get a sp-specific equation
height_regr <- read.csv("manuscript/tables_figures/tableS2_height_regression.csv", stringsAsFactors = FALSE)
height_regr$Equations <- gsub("[[:alpha:]].*$", "x", height_regr$Equations)
View(height_regr)
##2e. add in tree heights ####
## taken from the canopy_heights script
#the full equation is using all points for which we have data to create the equation, despite that for several species we don't have enough data to get a sp-specific equation
height_regr <- read.csv("manuscript/tables_figures/tableS2_height_regression.csv", stringsAsFactors = FALSE)
height_regr$Equations <- gsub("^.*= ", "", height_regr$Equations)
height_regr$Equations <- gsub("[[:alpha:]].*$", "x", height_regr$Equations)
View(height_regr)
install.packages("LeafArea")
